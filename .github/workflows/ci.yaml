on:
 push:
  branches:
   - main
permissions:
 content: write
jobs:

 build-linux:
  runs-on: ubuntu-latest
  steps:
   - uses: actions/checkout@v2
   - name: prepare dependencies
     run: sudo apt-get install -y libcairo2-dev libpango1.0-dev
   - run: make
   - uses: xresloader/upload-to-github-release@v1
     with:
      file: zundagame
      draft: false
  
 build-mac:
  runs-on: macos-latest
  steps:
   - uses: actions/checkout@v2
   - name: prepare dependencies
     run: |
      brew install --cask xquartz
      brew install pango

   - name: build
     run: |
      make TARGET=MACOS
      mv zundagame zundagame-mac

   - uses: xresloader/upload-to-github-release@v1
     with:
      file: zundagame-mac
      draft: false
